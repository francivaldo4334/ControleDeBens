<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Controle de Bens</title>
</h:head>
<h:body>
  <f:metadata>
      <f:viewAction action="#{assetTypeBean.loadAssetTypes}" />
  </f:metadata>
  <h:form id="formAssetType">
    <p:toolbar>
        <p:toolbarGroup align="left">
            <h:outputText value="Meu Controle de Bens" />
        </p:toolbarGroup>
        <p:toolbarGroup align="right">
            <p:button value="Voltar" icon="pi pi-arrow-right"
                      onclick="history.back(); return false;"/>

        <div class="card">
            <p:commandButton value="Adicionar" 
                             action="#{assetTypeBean.loadNewItem}"
                             update=":formAssetType:dialogFormAssetType"
                             oncomplete="PF('dlg1').show()"/>
        </div>
        </p:toolbarGroup>
    </p:toolbar>

    <p:messages id="msgsDelete" autoUpdate="true" />
    <p:dataTable id="tabela" value="#{assetTypeBean.assetTypes}" var="item">
      <f:facet name="header">
          Lista de Tipos de bens
      </f:facet>

      <p:column headerText="Nome">
      <h:outputText value="#{item.name}" />
      </p:column>

      <p:column headerText="Ações">
          <p:commandButton value="Editar"
                            action="#{assetTypeBean.setUpdateId(item.id)}"
                            process="@this"
                            update=":formAssetType:dialogFormAssetType"
                            oncomplete="PF('dlg1').show()"
                            />

          <p:commandButton value="Deletar"
                            action="#{assetTypeBean.delete(item)}"
                            process="@this"
                            update=":formAssetType:tabela :formAssetType:msgsDelete"/>
      </p:column>
    </p:dataTable>

  <p:dialog id="dialogFormAssetType" header="Novo item" widgetVar="dlg1" minHeight="40" width="500" showEffect="fade" closeOnEscape="true" >
    <p:panelGrid columns="2" columnClasses="label,value" style="width:100%;">
      <h:outputText value="Nome" />
      <p:inputText id="nome" value="#{assetTypeBean.assetTypeSelected.name}" required="true" />
    </p:panelGrid>
    <p:commandButton value="Salvar"
                      action="#{assetTypeBean.save}"
                      update="msgs tabela"
                      process="@form"
                      ajax="true"
                      style="margin-top:10px;"/>
    <p:messages id="msgs" autoUpdate="true" style="margin-bottom:10px;" />
  </p:dialog>
  </h:form>
</h:body>
</html>
